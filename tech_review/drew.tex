% ================================================================================================================================
\subsection{IRU Data Representation}
\subsubsection{Context}
Our solution requires an accurate reference point to compare against when determining the correct alignment offset.
The reference point in an aircraft is the data output from the aircraft’s IRU.
Since access to an expensive IRU is limited, we will need to find another method that is sufficient to test against. \\

\subsubsection{Options}
There are three simulation techniques to represent the sensor output from the aircraft’s IRU for our demonstration system.
The first technique would be to use a cheap MEMS for the sensor data when tracking motion.
The second technique would involve redundant MEMS and an algorithm to average across for higher accuracy. The third technique would be to fully simulate the IRU data \cite{REDUNDANT}.
This last technique would require the precise input of motion that could be simulated at runtime \cite{NIST}. \\


\subsubsection{Criteria}
\begin{enumerate}
	\item \textbf{Accuracy}: As the IRU is used as a reference point, the method to represent the IRU's data must maintain acceptable accuracy.
	\item \textbf{Cost}: Cost is a driving consideration as the IRU is already too expensive. The chosen method should stay within our budget.
	\item \textbf{Difficulty}: The chosen method should be one in which we are able to implement within the allotted timeframe. \\
\end{enumerate}

\newpage
\subsubsection{Table of Detailed Comparison}
\hfill \break
\begin{center}
\begin{tabular}{|c|c|c|c|}
\hline
\textbf{Method}      & \textbf{Single MEMS Sensor Data} & \textbf{Redundant MEMS Improved Sensor Data} & \textbf{Fully Simulated Sensor Data} \\ \hline
\textbf{Accuracy}    & Low  							& Medium                                       & High 								  \\ \hline
\textbf{Cost}        & Low  							& Medium                                       & Medium/High						  \\ \hline
\textbf{Difficulty}  & Low  							& Medium                                       & Low/Medium							  \\ \hline
\end{tabular}
\end{center}

\hfill \break
\subsubsection{Discussion}
The single MEMS sensor data simulation technique is the most predictable and straightforward.
This technique is dependent on the chosen hardware. Although the redundant MEMS improved sensor data simulation technique also depends on the chosen hardware, the accuracy may be higher as a result of overlapping data being used to reduce error.
The noise reduction for redundant MEMS is expected to be 1/sqrt(n). Lastly, the fully simulated sensor data technique would ideally provide the highest accuracy.
The approach would be to mount the demonstration system to a MEMS testing device. The simulated data would match the scripted motion of the testing device at runtime.
This approach could be less difficult but the cost is currently unknown. \\

\subsubsection{Selection}
At this time we are planning on following the single MEMS sensor data simulation technique as the cost and difficulty are both low.
Although the accuracy is less than the other two methods, it can be improved with the selection of hardware. \\
% ================================================================================================================================

% ================================================================================================================================
\subsection{Filter technique}
\subsubsection{Context}
In order to find the alignment offset we need data that represents the HUD position in 3d space.
We have chosen to use a quaternion output when calculating position as it provides the necessary information.
Not only must the output be in a usable form, it is also desired to be of high accuracy.
Individual sensor output will have some amount of error as specified by hardware.
By combining sensor data, performance issues can be reduced \cite{MOUSER}. \\

\subsubsection{Options}
Three options are presented to improve MEMS accuracy.
The first option is to the Extended Kalman Filter (EKF).
The next option is to use the Mahony Filter.
Lastly, we could simply enable the quaternion output mode if supported by hardware such as Invensense’s Digital Motion Processor (DMP).\\


\subsubsection{Criteria}
\begin{enumerate}
	\item \textbf{Accuracy}: When trying to find the correct alignment offset, accurate positional data is required.
	\item \textbf{Complexity}: Given that our budget limits the available hardware we have access to, the chosen algorithm must be quick enough to run in realtime.
	\item \textbf{Availability}: The choice must be available for use in our demonstration system. \\
\end{enumerate}

\newpage
\subsubsection{Table of Detailed Comparison}
\hfill \break
\begin{center}
\begin{tabular}{|c|c|c|c|}
\hline
\textbf{Method}       & \textbf{EKF} & \textbf{Mahony} & \textbf{DMP} 		\\ \hline
\textbf{Accuracy}     & High  		 & Medium          & Medium 			\\ \hline
\textbf{Complexity}   & High  		 & Medium          & Low				\\ \hline
\textbf{Availability} & Open Source  & Open Source     & Hardware Dependent	\\ \hline
\end{tabular}
\end{center}

\hfill \break
\subsubsection{Discussion}
The EKF provides the highest accuracy among the other two options \cite{EFK_MAHONY}.
The high accuracy can be attributed to the high complexity of the algorithm itself.
This high complexity is the main drawback to choosing EKF as our hardware must be able calculate the result fast enough to keep up with its output.
The EKF is available as open source. Next, similar accuracy is achieved by both the Mahony Filter and Invensense DMP.
While the Mahony Filter is also open source, the Invensense DMP is dependent on hardware as the chip is only on select boards \cite{MPU9250SDK}.
Both the Mahony Filter and Invensense DMP are able to run efficiently on most boards where applicable. \\

\subsubsection{Selection}
At this time we are considering the MPU-9250 IMU which supports DMP.
We will plan on using this feature unless a change of hardware is made.
Higher performance equipment will enable us to use the EKF in place of the Mahony Filter. \\
% ================================================================================================================================